
<!DOCTYPE html>
<html lang="en">
<head>
    <%- include('./partials/links.ejs') %>
    <link rel="stylesheet" href="/styles/main-menu.css">
    <link rel="stylesheet" href="/styles/main-header.css">
    <link rel="stylesheet" href="/styles/account-settings.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="/script/validator.min.js"></script>
</head>
<body>
	<section class="header-container"> <!-- header-container: Contains everything on the top bar | main-header.css -->
        <div class="header">
            <div class="brand-container">
                <a href="/decks" class="brand-name">Kanau</p><img src="/img/logo-transparent-dark.png" class="brand-icon"></a>
            </div>
            <div class="dropdown-container">
                <button class="header-more-button"></button>
                <div class="dropdown-content">
                    <a href="/decks">Return to decks</a>
                    <a href="/about">About Kanau</a>
                    <a href="/logout">Logout</a>
                </div>
            </div>
        </div>
    </section>
    <div class="details-container">
    	<p class="page-header">Account Details</p>
    	<br>
    	<p class="text-details">Current email:</p>
    	<br>
    	<div class="email-container">
    		<div class="current-email"><%= info.email%>
    			<button class="button is-primary" id="change-email-btn">Change Email</button>
    			<button class="button is-primary" id="change-password-btn">Change Password</button>
    		</div>
    	</div>
    	<br>
    	<br>
    	<p class="text-details">You have created <%= info.deckCount%> deck/s and <%= info.allCardsCount%> so far.</p>	
    	<br>
    	<br>
    	<a href="/index" class="button is-danger">Delete Account</a>
    </div>
    <div class="modal" id="change-email-modal">
    	<div class="modal-background"></div>
 		<div class="modal-card">
                <header class="modal-card-head">
                    <p class="modal-card-title">Change Email</p>
                    <button class="delete is-large" aria-label="close" id="email-close-btn"></button>
                </header>
                <section class="modal-card-body">
                   <form id="change_email_form" action="/changeEmail" method="post" onsubmit="return false;">

                        <label for="old_email_input" class="content is-medium" >Enter Old Email</label>
                        <input type="email" class="input" id="old_email_input" name="old_email_input" placeholder="Old Email">
                        <p id="old_email_input_error" class="error"><%= details.old_email_input_error %></p>
                       
                        <label for="new_email_input" class="content is-medium" >Enter New Email</label>
                        <input type="email" class="input" id="new_email_input" name="new_email_input" placeholder="New Email">
                        <p id="new_email_input_error" class="error"><%= details.new_email_input_error %></p>

                        <label for="new_email_confirm_input" class="content is-medium" >Confirm New Email</label>
                        <input type="email" class="input" id="new_email_confirm_input" name="new_email_confirm_input" placeholder="Confirm New Email">
                        <p id="new_email_confirm_input_error" class="error"><%= details.new_email_confirm_input_error %></p>

                        <label for="password_input" class="content is-medium" >Password</label>
                        <input type="password" class="input" id="password_input" name="password_input" placeholder="Password">
                        <p id="password_input_error" class="error"><%= details.password_input_error %></p>

                        <div class="container">
                        	<br>
                         <input class="button is-primary" id="change_email_submit" type="submit" value="Change" disabled>
                        </div>
                    </form>
                </section>
            </div>	
    </div>
    <div class="modal" id="change-password-modal">
    	<div class="modal-background"></div>
 		<div class="modal-card">
                <header class="modal-card-head">
                    <p class="modal-card-title">Change Password</p>
                    <button class="delete is-large" aria-label="close" id="password-close-btn"></button>
                </header>
                <section class="modal-card-body">
                   <form id="change_password_form" action="/changePassword" method="post" onsubmit="return false;">

                        <label for="old_password_input" class="content is-medium" >Enter Old Password</label>
                        <input type="password" class="input" id="old_password_input" name="old_password_input" placeholder="Old Password">
                        <p id="old_password_input_error" class="error"><%= details.old_password_input_error %></p>

                        <label for="new_password_input" class="content is-medium" >Enter New Password</label>
                        <input type="password" class="input" id="new_password_input" name="new_password_input" placeholder="New Password">
                        <p id="new_password_input_error" class="error"><%= details.new_password_input_error %></p>

                        <label for="new_password_confirm_input" class="content is-medium" >Confirm New Password</label>
                        <input type="password" class="input" id="new_password_confirm_input" name="new_password_confirm_input" placeholder="Confirm New Password">
                        <p id="new_password_confirm_input_error" class="error"><%= details.new_password_confirm_input_error %></p>

                        <div class="container">
                        	<br>
                         <input class="button is-primary" id="change_password_submit" type="submit" value="Change" disabled>
                        </div>
                    </form>
                </section>
            </div>	
    </div>
    <script src="/script/account-settings.js"></script>
    <script src="/script/change-email.js"></script>
    <script src="/script/change-password.js"></script>
</body>
</html>